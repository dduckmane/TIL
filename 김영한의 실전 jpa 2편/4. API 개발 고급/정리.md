컬렉션 조회: dto안에 dto를 만들어야한다. --> dto안에 컬렉션이 있다는 것은 엔티티를 그대로 노출하겠다라는 것임

엔티티조회 vs dto로 직접조회

[세팅]

-jsonIgnore, hibernate 5 module을 빈으로 등록

[엔티티 조회]

- dto변환, 배열 형태이기때문에 객체로 한번 더 감싸야함
- 패치조인으로 n+1해결
- batch 사이즈로 데이터 뻥튀기 문제 해결, 페이징 문제 해결: 컬렉션은 fetch조인 안함

[Dto 직접 조회]

- 패치조인안씀--> 이미 다 조인을 해서 필요한 값만 가져온다. 패치조인=미리조인 이기때문이다.
- batch사이즈 안씀--> 컬렉션을 바로 dto로 못바꿈
- dto 직접 조회는 repository를 새로 만들어야함 -->dto로 직접조회한다는 것은 화면에 의존하고 있다는 것이므로 새로 만들어야한다.
- dto를 controller에 만들어서 사용하면 안됨, 엔티티조회시에도 따로 만들면 더 좋음--> controller에 dto가 있으면 화면을 의존하게 된다.

(초기화)

컬렉션 조회 최적화 - 일대다 관계인 컬렉션은 IN 절을 활용해서 메모리에 미리 조회해서 최적화: V5

플랫 데이터 최적화 - JOIN 결과를 그대로 조회 후 애플리케이션에서 원하는 모양으로 직접 변환: V6--> 페이징 불가

[권장 순서]

엔티티 조회방식을 하는 것을 강사님이 더 권장함, dto로 바로 조회를 하면 성능은 좋지만 단점이 너무 많음

![image](https://user-images.githubusercontent.com/108928206/194073034-dbf1478d-9848-4fa1-93b1-ae38629977f5.png)

![image](https://user-images.githubusercontent.com/108928206/194075681-60d5cf2e-37b3-4001-bb27-cab465f7ce61.png)


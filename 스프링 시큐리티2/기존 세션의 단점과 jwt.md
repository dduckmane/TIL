## [기존 세션의 단점]

- 세션 id는 만료시간이 없기에 한번 탈취가 당하면 브라우저가 종료되기전까지는 보안에 취약하다.
- 메모리의 과부화
- 다중 서버 불가능

## [jwt의 장점]

- jwt를 사용하면 만료시간이 존재 클라이언트쪽에서 만료가 되서 유효하지 않은 토큰이 됨
- 다중 서버 가능, 메모리의 과부하가 없음
- 서명기능이 된다.--> jwt를 사용하면 서버에서 jwt의 username을 바탕으로 어떤 회원의 토큰인 줄 알 수 있고
  
  - 공격자가 만들어서 보낼 수가 없고 jwt토큰안에는 사용자의 정보는 들어있지 않음

## [jwt의 단점과 refresh토큰]

- jwt가 만료가 되도 refresh토큰은 유효함
- 만료시에 클라이언트에 403이 떨어지고 그럼 클라이언트에서 refresh api로 refresh토큰을 보냄
- 그럼 서버에서는 db검증을 통해서 refresh토큰이 유효한지 확인한다.
- 유효한지 확인이 되면 refresh토큰과 jwt토큰의 재 발행
- 그럼 fetch로 클라이언트가 다시 받아서 다시 요청

## [한계]

- refresh 토큰이 탈취당할 수 있다.
- 하지만 탈취를 당해도 공격자는 refresh api를 모른다.
- 만약 알아도 서버에서 jwt만료시간전에 refresh가 요청이 되면 공격받았다고 알 수 있음 --> 하지만 jwt만료시간이 지나고 요청하면 말짱 
